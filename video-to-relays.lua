local videoData = {
    width = 10,
    height = 8,
    data = {"00000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "00000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "00000001110000000111000000011100000000110000000001000000000100000000010000000000",
    "11100001111110000111111100011111100001111110000111110000001111000000111100000011",
    "11110001111111001111111100111111110011111111000111111000011111100000111111000011",
    "11110111111111001111111100111111110011111110001111111000111111100011111110001111",
    "11111001111111000111111110111111110001111111000111111100011111110001111111000111",
    "11110000111111000011111100011111110001111111000111111100001111110000111111000001",
    "11111111111111110011111110001111111000111111110011111011001111100000111110000011",
    "11111100111111100011111110000111111000011111110001111001000111110000111111000001",
    "11111100111111100001111110000111111000011111000001111100000111110000011111000001",
    "11110000111111000011111100000111111000011111100001111110001111001000111110000011",
    "11111111111111110111111101011111110001111111000010111100001011110000001111111100",
    "11111111111111111111111111111111111111111111101111111100011111111011111111111111",
    "11111111111111111111111110111111110001111111000111111111111111111111111111111111",
    "00001111110000111111000001001100001100000000111000000011100000000000000000000000",
    "00011111110000111100010011110001101111100001111111000101111100101111111111111111",
    "00111011110001111111000011111100000111110000011111000001111100000011110000001111",
    "00000000000000000000000001000000000110000000011110000001111100000000000000000000",
    "00000000000000000000000001000000000110000000000000000000000000000000000000000000",
    "00000000000000000000000001000000000110000000000000000000000000000000000000000000",
    "00000000000000000000000001000000000110000000000000000000000000000000000000000000",
    "00000000000000000000000000100000000001000000001110000000000010000000001000000000",
    "00000000000000000000000000100000000011000000000000010000000011110000001111000000",
    "00000000000000000000000000100000000010000000001100010000000011111000001111100000",
    "00000000000000000000000000100000000011000000001100000000000011000000001111100000",
    "00000000000000000000000000000100001110110000100111000000000000000000000000000000",
    "00000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "11111101111111111111111111111111111111111111111111111111111111111111111111111111",
    "11111111111111111111110111111111011111111101111111110111111111011111111111111111",
    "11111111111100111111111011111111001111111100111111110011111111001111111100111111",
    "11111111111111101111111110011111111001111111101111111110111111111001111111100111",
    "11111011111111100111111110011111000001111111100111111110011111111001111111100111",
    "11111111111111100111111110011111111001111111100011111100001111100000111111100011",
    "11111110111111110001111111000111110100011111010001111100000111111000001111100000",
    "11111100001111110000111110000011111100001110110000111001000011110000001111000000",
    "11111111111111111111111011111111110111111110011111111000111111100011111111000111",
    "11111111111111000111111100011111110011111001000110100000000011110011111111001111",
    "11111111111111000111111100111111110011111011001101010000000011110011111111001111",
    "11111111111111000011111100011111110001111001001111110000000011100011001111001111",
    "11111111001111111000111111000011111110001100111100111101000111110000001111110000",
    "11111111111111111111111111111111111111111111111111111111111111100111111110011111",
    "11111111111111111111111111111111100111111111000111111100111111111111111111111111",
    "00000000000000000000000000000000000000000000000000001000000000010101000001101010",
    "00000000000000000000000000000000001000000000010000000000000000000000000000000000",
    "00000000000000000000000000000000001100000000010000000000000000000000000000000000",
    "00000000000000000000000010000000001000000000110000000001000000001100000000110000",
    "00000000000000000000000001000000011100000000100000000011000000001100000000110000",
    "00000000000000110000000011000000001100000000111000000011100000001110000000111000",
    "00000000000000011100000001110100000011010000001110000000111000000111100000011100",
    "00000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "00000000000000011100000001110000001111001110001100001111111100001111010000011100",
    "00000010000000011100000001110000000010000011011100000111111100000111000000011100",
    "00000000000000111000000011100000001100000000110101000011000000001100000000110000",
    "00000000000000111000000011100000001100001001111011000111000000001100000000111000",
    "00000000000000111000000011100000001100001001111001000111100000001100000000110000",
    "00001100000000111000000011100000001100001101111011001111100000111111000000110000",
    "11100000111111000011011100101000000000001110000111111000011111000001110001001000",
    "00000000000000000000000000000000000000001111111111000000000000000000000000000000",
    "00000000000000000011000000000000000010000000001100000000100000000011000000011100",
    "00000100000100000000000010000001001000000100100000000011000000001100000000000000",
    "00000001000000000000000010000001001000000100100000000011000000001000000000000000",
    "00000000000000110000000011000000001111100100110000000011000000011100000001110000",
    "00001000000001110000001111000001111100100111111000011111101000000000100000010000",
    "00000000000111000000011100000001110000000111100000011100000001111000001111100000",
    "00010000000011100000011110000000111000000011100000001110000000111100000011110000",
    "00100000001111000000111100000011110000001111000000111111100011111111001111111000",
    "00000000000011100000001110000000111000000011110000001110000000111111000111111110",
    "00000000000111000000011100000001110000000111000000011100000001111110000111111100",
    "00000000000111000000011110000001110000000111000000011110000001111000000111111110",
    "00000000001000000000110000000011000000001100000000110000000011000000001100000000",
    "00000000000000000000000000000000000100000000110000000010000000000000000000000000",
    "00000000000000000000000000000000001110000001110000000100000000000000000000000000",
    "00000000000000000000000000000000000000000011111100000111100000000000000000000000",
    "00001100000001110000000011001100111111111111111111111111111011111110000111000000",
    "01001100001000110000100011010010001110001000010000000011000000011110000011111011",
    "00000000000000010000110011000010001100001000011100100001100010000110000100111000",
    "00000000000000001100011001110001000011000100001111010000110000100011100010011110",
    "00001111100000111110000011111000001111100000111110000011111000001111100000111110",
    "00000111110000011111000001111100000111110000011111000010111100001011110000101111",
    "00000111110000011111000010111100001011110000101111000010111100001011110000101111",
    "00000111110000011111000000111100001011110000101111000010011100001011110000101111",
    "00000111110000111111000011111100001111110000111111000011111100001111110000111111",
    "00011111110001111111000001111100100111110000011111000001111100000111110010011111",
    "00000000000000000000000000000000000000000000000001000000000000000000000000000000",
    "00000000000000100000000011000000001100000000110000000011000000001100000000110000",
    "00000000000000100000000011000000001100000000110000000111000000001100000000110000",
    "00000000000000110000000011000000001100000001110000000011000000001100000000110000",
    "00000000000000110000000011000000101100000011110000000011100000001100000000110000",
    "00000000000000110000000011000000101100000011110000000011100000001100000000110000",
    "00000000000000110000000111100000011110000001111000000011000000001100000000110000",
    "11110111101111111110111111111111111011101111111110011111111001111111100011111100",
    "11111111111111111111111111111111111111111111111111111111111111111111111111111111",
    "00001111110100111111010011111101101111110111111111011111111111111111110110111111",
    "00100111111110011111011011111111101111111110111111011111111101100111110110011111",
    "00000000000010000110001000011001100001100011000110001100011001110001100011000100",
    "00000000000001100000001111110000110011000011001100001111110000110011000011001110",
    "00010000000001000000000111100000011110000001111000000111100000011110000011001110",
    "00111111001111111110011111110001111011000111011100011101100001111001000011111100",
    "11110000001111000000111100000111100000000000000000000000000000000000010000000001",
    "11100000001110000000111000010000000001000000000100000000010000000001100000001110",
    "11100000001110000000111000100000000010000000001100000000110000000011000000001100",
    "11100000001110000000111000100000000110000000001000000000110000000011000000001100",
    "11100000001110000000111000100000000110000000001100000000110000000011000000001100",
    "11100000001110000000111000011000000001000000000110000000011000000001100000001110",
    "00011111100001111100000011110000000000000000000000000000000000000000000000000000",
    "00000000110000000011000000000100001100000000110000000001000000001100000000110000",
    "00000000110000000001000001000000000100000000010000000001000000001100000000010000",
    "00000000000000010000000011100000000110000000011000000011100000001110000000111000",
    "00000000000000011100000011110000001111000001111000011111110011111111101111111111",
    "00000000010000000000000001000000001110000000110000000011000000011100000011110000",
    "11111111111111111111111111111111111111111111111111111111111111111111111111111111",
    "11111111111111111111111111111111111111111111111111111111111111111111111011111101",
    "11111111111111111111111111111111111111111111111111111101110110110111011001101101",
    "11111111111111111111110110110111011010011001101101110111110111011011111001111111",
    "11111111111111011101111111110100010111011111111101110111111110111111011111111111",
    "11001111111100011111100001111110001111111100111111110011111111001111111000111111",
    "11111100111111100011011110001100110000110011110011001111001100111100110011100011",
    "11111111111101111111100111111011011111101000111100100011110000001111000000111100",
    "11111111111111100111111110011111111001111110100111111000011111111001110001000111",
    "11111111111111111111111111111111111111111111001111110000001111000000111110000111",
    "00000000000000000000000000000000010010000011111100001111110000111111000011111100",
    "11111111111111111111111111111111111111111110000111110000001111000000111100000001",
    "00010110000000110000000011000000011110000001111100000011110000001111000000111100",
    "00000000000000000000000001000000000110000000011000000001100000000110000000000000",
    "00000000000000000000000000000000000000000100000000100000000000000000000000000000",
    "00010000000000000000000010000000111111010000111100000011100000001110000000011000",
    "00011110110001111000000111000000111100001111111111101111100000001000000001110000",
    "11111111111111111111111111111111110111111111011110011101111111110111111111011111",
    "11111111111111111111111111111111111011111111101111111110111111111011111111101111",
    "11111111111111111111111111001111111100011111110001111110000111111000011111000001",
    "11111111111111111111111110001111111100011110110011111000001111100000111110010001",
    "11110111111111001111111100011111110001111110000111110000011111110001111111000111",
    "11111111001111111100111111111011111111101111111010111111111011111111001111111000",
    "11111111111111111111111011111111101111111110111111111011111111101111111110111111",
    "11111111111111111111111011111111101111111110111111110011111111001111111100111111",
    "11111111111111111111111011111111101101111110110011110011101111001110111100111011",
    "11111111111111111111111011111111101110111100111011110011001111001100111100111011",
    "11111111111111111111111011111111001110111100111011110011001111001100111100111011",
    "11111111111100011111111000011111100001111110000011110000011111100001111100000111",
    "11111111111111111111111111111111111111111111111111111111111111111111111111111111",
    "11111111111111111111111111111111101101111100110011111111111111111111111111111111",
    "10000011110000000111000000001100011100010001110001001111001100110000110010000111",
    "00001100000000110000000000000000000000000000110000000010000000001000000000100000",
    "00001100000000000000000001000000001100000000010000000001000000000100000000000000",
    "00000000000000010000000011100000001110000000110000000011000000001100000000110000",
    "00001111110000011111000011111100011111110001111001000011100000001111000000111100",
    "00000000000001100000000111000000011111110001111110000111000000011100000001100000",
    "00000000000000000000000010000000001000000000100000000011000000000000000000000000",
    "00000000000000000000000001000000000100000000010000000001100000001110000000011000",
    "00000000000000000000000010000000011100000001100000000110000000111100000011110000",
    "00000000000000111000000011100000001110000000111000000011100000001110000000111000",
    "00000000000000110000000111000000001100001000110000011111100000001110000000111000",
    "00000000000000110000000011000000001100000000110000000111100000011110000001111000",
    "00000000000111100000011110000000111000000011100000011110000011111000001111100000",
    "11000001111110001111111000011111000001111110000011110000011111000000111110000111",
    "10111111111001111111100011111100000001110000000011001100000100010000110001100011",
    "11111111111111100111111110001111111100011110000000111100000011111001001111100110",
    "11111101111111100011111110001111111100011110110000111000000011110001001111100110",
    "11111110111111110011111111000111110100011111010000111100000011011000101110000010",
    "01111111111111111111111111111111111111111111111111111111111111111111111111111111",
    "11111111111111111111111111111111110111111111101111111111001111111110001111111100",
    "11111111111111011111111000111111110011111111001111110000011110000001111101000111",
    "11111111111101111011110000011111000001111111100111111000011111110001111111000111",
    "11111111111100111111110000001111100000111110100111111000011111110001111111000111",
    "11111111111100111111110001101111100000111110100011111000011111110001111111010111",
    "11100111111110011111111000101111101000111111000011111100011111100001111110000111",
    "11100011111110001111111000111111101100001110000000111100000011110000011111000011",
    "11111001111111111111111111111111111111111111111111111111111011111111001111111000",
    "11111111111111111111111111111111111111111111111111111100111111111111111111111111",
    "11111111111111111111111111111111111111111111111111111110111111110011111111111111",
    "11111111111111100111111111011111111001111111001111111100011111111001111111100011",
    "11111101111111110011111111001111111101111110100111111000011111100001111110000111",
    "11111110011111111001111111000111111100111111110011111011001111100000011110010001",
    "11111111111111111111111100111111111000011111110001111111111111111111111111111111",
    "11111111111111111111111111111111110111111111011111111110011111111011111111111111",
    "11111111111111001111111100111111111011111111001111111100011111110111111111011111",
    "11111111111111111111111110011111111001111110100011111110000111111000011111100011",
    "11001111111110001111111110000011111100001111111110111111111111111111111111111111",
    "11100000001110000111111110111111111011111111011111111111111111111111111111111111",
    "11110111111111011111111101111111110111111111011111111111111111111111111111111111",
    "00000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "00000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "00000000000010000000011100000011110000000110000000011000000011100000000110000000",
    "00010000000111000000011100000001010000000001100000000100000001110000000011000000",
    "00001100000001100000001110000000001000000000100000000010000000111000000011100000",
    "00000000000000000000000001000000000100000000010000000011010000011100000001110000",
    "00000000000000000000000001000000000100000000010000000001000000001110000000111000",
    "00000000000000000000000000000100000000000111111011000000000000000000000000000000",
    "00001110110000010011000011011000011001100001101110001110110011111111100000001001",
    "00000001110000000110000000011011000011101000001111100000111110000011101000001110",
    "00000000000000110000000011000011001110001000011100100001000011001100000100110000",
    "00000000000000110000000111000000111000000000111000000011110000001111000000110000",
    "00011000000001100000001110000001111000000001110000000111100000001111000000110100",
    "00000111000000111100011011100000001110000000011100000001111000000111110000011111",
    "11000000001100000000110000000011000000001000000000100000000010000000001100000001",
    "00010000000000100000000000000000000000000000000000000000000000000000000000000000",
    "00000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "00000000000000000000000000000000000000000000110000000111100000001100000000000000",
    "00000000000000000000000000000000000000000000000000000010000000001000000010000100",
    "00000000000000000000000000000000000000000000010000000011000000001100000000110000",
    "00000000000000000000000000000000001100000000110000000011000000001100000000110000",
    "00000000000000000000000010000000001000000000110000000111000000011100000000110000",
    "00000000000000000000000111000000001100000000110000000011100000011110000001111000",
    "00010010000001101000000110100000011010000001111000000111100000011110000001111000",
    "11110001111111000111111100011111110001111110100011111011111111111111111111111111",
    "10111110001001111000100111100010111110001111111000111111100111111110011111111001",
    "10111000001011100000101110000011111000001111100000111110001011111000101111100000",
    "00111000001011100000101110000011111000001111100000111110001011111000101111100001",
    "01111100000001110000111110000011111000001111100000111100000011110000011111000011",
    "11000000111111100001111110000111101000010111100001011110000001111000000011111000",
    "10000000000000000000000000010001110000000111100001110011111111111111111111111110",
    "11110000001111100000110110000011011000001111100100111110010011111000001111110000",
    "00000000001111000000111110010011111000001101100000100110000011111100001111111111",
    "11000000001100000000110000000011000010001100001110110000101011000000001100000000",
    "11100000001110000000111000000011100001001110000100111000001111100000001110000000",
    "00011111110001111111000111111100011111111001111111000000011100000011110000001111",
    "11100011111110001111111000111111100011111111000111111100011111110001111111000111",
    "00000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "00000000000000000000000000000000000000000000000000000000000000000000000000000000"
    },
    fps = 1
}

-- The 'level' object is defined in Chaoshead
local bx = level.left
local by = level.top
local receiveChannel = (videoData.width * videoData.height) + 1

local function relay(receive, send)
    local b = level:placeRelay(bx, by)
    b:setReceivingChannel(receive)
    b:setSendingChannel(send)
    b:setSwitchRequirements("Any Active")
    bx = bx + 1
    if bx > level.right then
        bx = 1
        by = by + 1
    end
end

-- Initialize a table to store unique frames and their receive channels
local uniqueFrames = {}

-- Decode video data and generate relays for each frame
local frameIndex = 0
for _, frameData in ipairs(videoData.data) do
    if not uniqueFrames[frameData] then
        uniqueFrames[frameData] = receiveChannel

        for pixel in frameData:gmatch(".") do
            if pixel == "1" then
                relay(receiveChannel, frameIndex)
            end
            frameIndex = frameIndex + 1
        end
    else
        -- Place relay with sending channel as the duplicate frame's receive channel
        relay(receiveChannel, uniqueFrames[frameData])
    end
    receiveChannel = receiveChannel + 1  -- Increment receive channel for the next frame
    frameIndex = 0  -- Reset frame index for the next frame
end
